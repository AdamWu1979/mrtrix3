#!/usr/bin/env python

# Make the corresponding MRtrix3 Python libraries available
import inspect, os, sys
lib_folder = os.path.realpath(os.path.abspath(os.path.join(os.path.split(inspect.getfile(inspect.currentframe()))[0], os.pardir, 'lib')))
if not os.path.isdir(lib_folder):
  sys.stderr.write('Unable to locate MRtrix3 Python libraries')
  sys.exit(1)
sys.path.insert(0, lib_folder)



from mrtrix3 import app, run

app.init('test','might help: https://stackoverflow.com/questions/375427/non-blocking-read-on-a-subprocess-pipe-in-python/')
app.cmdline.addDescription('Test runCommand')
app.cmdline.add_argument('dummy', help='anything')
app.parse()

import subprocess
p = subprocess.check_output("base64 /dev/urandom | head -c 10000000 > /tmp/text", shell=True)
app.console('start run.command')
run.command ('cat /tmp/text | echo')
app.console('done')


app.complete()

